/* Script# Loader
 * Designed and licensed for use and distribution with Script#-generated scripts.
 * Copyright (c) 2012, Nikhil Kothari, and the Script# Project.
 * More information at http://scriptsharp.com
 */
"use strict";(function(d){var h="complete",g="text/javascript",b=null,c=false,e="script",a=true;function k(b,d){var c=[];if(b)for(var a=0,e=b.length;a<e;a++)c.push(d(b[a],a));return c}var y=/^https?:\/\/.*/,i={},r=[],p=[];function B(b){var c=i[b];if(!c)c=i[b]={name:b,amd:a,src:f.config.scriptPath.replace("{name}",b)};return c}function u(){for(var n=document.getElementsByTagName(e),m=0,s=n.length;m<s;m++){var g=n[m];if(g.type=="text/script"){var h=g.getAttribute("data-name"),l=c;if(!h){h="s"+(new Date).valueOf();l=a}var d=i[h]={name:h,amd:a,src:g.getAttribute("data-src")};if(!d.src){var j,k=f.config.localStore?g.getAttribute("data-store"):b;if(k=="load")j=v(h);else{j=g.text;k&&w(h,j,k)}if(l)j=j.replace("define([","define('"+d.name+"', [");d.text=j;d.useText=a}else{var q=g.getAttribute("data-export");if(q){d.amd=c;d.exp=q;var o=g.getAttribute("data-requires");if(o)d.requires=o.split(",")}}(l||g.hasAttribute("data-autoload"))&&r.push(d.name);!y.test(d.src)&&g.hasAttribute("data-preload")&&p.push(d.name)}}}function v(a){return localStorage["script."+a]}function w(c,e,d){var b="script.$";localStorage["script."+c]=e;var a=localStorage[b];a=a?JSON.parse(a):{};a[c]=d;a=JSON.stringify(a);localStorage[b]=a;document.cookie=f.config.cookie+"="+encodeURIComponent(a)+"; max-age=15552000; path=/"}function x(e){var d=i[e],c=new XMLHttpRequest;c.onreadystatechange=function(){if(c.readyState==4){c.onreadystatechange=b;if(c.status==200){d.useText=a;d.text=c.responseText}}};c.open("GET",d.src,a);c.send()}var s=document.getElementsByTagName("head")[0];function A(c){var a=B(c);if(a.amd){var b=document.createElement(e);b.type=g;if(a.useText)b.text=a.text;else b.src=a.src;s.appendChild(b)}else a.requires?j(a.requires,function(){o(a)}):o(a)}function o(c){var a=document.createElement(e);a.type=g;a.src=c.src;a.onload=a.onreadystatechange=function(){var d=a.readyState;if(d&&d!=h&&d!="loaded")return;a.onload=a.onreadystatechange=b;try{q(c.name,eval(c.exp))}catch(e){}};s.appendChild(a)}var m={};function l(a){return m[a]||(m[a]={name:a,exports:b,callbacks:[],loading:c})}function z(d,c){var b=l(d);if(b.callbacks){b.callbacks.push(c);if(!b.loading){b.loading=a;A(d)}return 0}return setTimeout(c,0)}function q(f,e){var a=m[f],d=a.callbacks;a.callbacks=b;a.exports=e;a.loading=c;k(d,function(a){a()})}function j(a,e){a=a||[];var c=a.length;if(c==0){setTimeout(e,0);return}var b=0,f=function(){b++;if(b==c){var f=k(a,function(a){return l(a).exports});e.apply(d,f)}};k(a,function(a){z(a,f)})}function f(b,e,f){var c=l(b);if(!c.callbacks)return;c.loading=a;j(e,function(){q(b,f.apply(d,arguments))})}f.amd={jQuery:a};f.config={scriptPath:"/scripts/{name}.js",cookie:"scripts",localStore:!!d.localStorage};d.require=j;d.define=f;function n(){u();j(r,function(){k(p,function(a){x(a)})})}if(document.addEventListener){var t=document.readyState;t==h||t=="interactive"?setTimeout(n,0):document.addEventListener("DOMContentLoaded",n,c)}else d.attachEvent&&d.attachEvent("onload",function(){n()})})(window)