/*! Script.js 1.0.0.0
 * 
 */
require(["ss","D3","Facebook","jquery"],function(n,t,i,$){function r(){}function u(n,t){this.index=0,this.name=n.first_name+n.last_name,this.id=n.id,this.index=t}var o=this,f,e;r.$3=function(){var n={};n.scope="email, user_likes, publish_stream",FB.login(function(){},n)},r.$4=function(){var n=[],t=[];FB.api("/me/friends",function(i){for(var o,s,e,h,f=0;f<i.data.length;f++)o=new u(i.data[f],f),r.$1[o.id]=o,s=new Node,s.name=o.name,s.group=1,n[n.length]=s;e={},e.friendsLimit="SELECT uid1, uid2 from friend WHERE uid1 = "+r.$0+" ORDER BY uid2",e.friendsAll="SELECT uid1, uid2 from friend WHERE uid1 = "+r.$0,e.friendsoffriends="SELECT uid1, uid2 FROM friend WHERE uid1 IN (SELECT uid2 from #friendsLimit) AND uid2 IN (SELECT uid2 from #friendsAll) AND uid1 < uid2",h={},h.method="fql.multiquery",h.queries=e,FB.api(h,function(i){for(var a,o,u=0;u<i[2].fql_result_set.length;u++){var s=i[2].fql_result_set[u],v=r.$1[s.uid1],y=r.$1[s.uid2],f=new Link;f.source=y.index,f.target=v.index,f.value=1,t[t.length]=f}var h=960,c=500,e=d3.layout.force().charge(-120).linkDistance(30).size([h,c]),l=d3.select("#canvas").append("svg").attr("width",h).attr("height",c);e.nodes(n).links(t).start(),a=l.selectAll(".link").data(t).enter().append("line").attr("class","link").style("stroke-width",function(n){return Math.sqrt(n.value)}),o=l.selectAll(".node").data(n).enter().append("circle").attr("class","node").attr("r",5).call(e.drag),o.append("title").text(function(n){return n.name});e.on("tick",function(){a.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}),o.attr("cx",function(n){return n.x}).attr("cy",function(n){return n.y})})})})},r.$5=function(){FB.logout(function(){})},r.$6=function(){$("#login").click(r.$3),$("#graph").click(r.$4),$("#LogoutButton").click(r.$5);var n={};n.appId="459808530803920",n.channelUrl="http://localhost/channel.aspx",n.status=!0,n.cookie=!0,n.xfbml=!1,FB.init(n),FB.getLoginStatus(function(n){n.status==="connected"&&(r.$0=n.authResponse.userID,document.getElementById("image").src="http://graph.facebook.com/"+r.$0+"/picture")}),FB.Event.subscribe("auth.authResponseChange",function(n){n.status==="connected"?(r.$0=n.authResponse.userID,document.getElementById("image").src="http://graph.facebook.com/"+r.$0+"/picture"):document.getElementById("image").src=""})},f={},e=n.module("Script",{FFJS:[r,null,null]},{Friend:[u,f,null]}),r.$1={},r.$2=!1,$(r.$6)})