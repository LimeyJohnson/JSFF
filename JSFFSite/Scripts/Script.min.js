/*! Script.js 1.0.0.0
 * 
 */
require(["ss","d3","Facebook","jquery"],function(n,t,i,$){function r(){}function u(n,t){this.index=0,this.name=n.first_name+n.last_name,this.id=n.id,this.index=t}var o=this,f,e;r.$3=function(){var n={};n.scope="email, user_likes, publish_stream",FB.login(function(){},n)},r.$4=function(){var n=[],i=[];FB.api("/me/friends",function(f){for(var s,h,o,c,e=0;e<f.data.length;e++)s=new u(f.data[e],e),r.$1[s.id]=s,h={},h.name=s.name,h.group=1,n[n.length]=h;o={},o.friendsLimit="SELECT uid1, uid2 from friend WHERE uid1 = "+r.$0+" ORDER BY uid2",o.friendsAll="SELECT uid1, uid2 from friend WHERE uid1 = "+r.$0,o.friendsoffriends="SELECT uid1, uid2 FROM friend WHERE uid1 IN (SELECT uid2 from #friendsLimit) AND uid2 IN (SELECT uid2 from #friendsAll) AND uid1 < uid2",c={},c.method="fql.multiquery",c.queries=o,FB.api(c,function(u){for(var v,s,f=0;f<u[2].fql_result_set.length;f++){var h=u[2].fql_result_set[f],y=r.$1[h.uid1],p=r.$1[h.uid2],e={};e.source=p.index,e.target=y.index,e.value=1,i[i.length]=e}var c=960,l=500,o=t.layout.force().charge(-120).linkDistance(30).size([c,l]),a=t.select("#canvas").append("svg").attr("width",c).attr("height",l);o.nodes(n).links(i).start(),v=a.selectAll(".link").data(i).enter().append("line").attr("class","link").style("stroke-width",function(n){return Math.sqrt(n.value)}),s=a.selectAll(".node").data(n).enter().append("circle").attr("class","node").attr("r",5).call(o.drag),s.append("title").text(function(n){return n.name});o.on("tick",function(){v.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}),s.attr("cx",function(n){return n.x}).attr("cy",function(n){return n.y})})})})},r.$5=function(){FB.logout(function(){})},r.$6=function(){$("#login").click(r.$3),$("#graph").click(r.$4),$("#LogoutButton").click(r.$5);var n={};n.appId="459808530803920",n.channelUrl="http://localhost/channel.aspx",n.status=!0,n.cookie=!0,n.xfbml=!1,FB.init(n),FB.getLoginStatus(function(n){n.status==="connected"&&(r.$0=n.authResponse.userID,document.getElementById("image").src="http://graph.facebook.com/"+r.$0+"/picture")}),FB.Event.subscribe("auth.authResponseChange",function(n){n.status==="connected"?(r.$0=n.authResponse.userID,document.getElementById("image").src="http://graph.facebook.com/"+r.$0+"/picture"):document.getElementById("image").src=""})},f={},e=n.module("Script",{FFJS:[r,null,null]},{Friend:[u,f,null]}),r.$1={},r.$2=!1,$(r.$6)})